// --- Local Storage Handlers (Trade Records) ---
// ... (생략) ...

    function loadSavedTrades() {
        const trades = getSavedTrades();
        // 이미 여기서 내림차순(최신순)으로 정렬하고 있습니다.
        trades.sort((a, b) => b.timestamp - a.timestamp); 
        renderSavedTrades(trades);
        
        const limitNote = document.getElementById('storageLimitNote');
        if (limitNote) {
            if (trades.length >= MAX_TRADES) {
                limitNote.style.display = 'block';
            } else {
                limitNote.style.display = 'none';
            }
        }
    }

// ... (생략) ...

    /**
     * 로컬 저장소에서 가져온 기록 목록을 렌더링합니다.
     */
    function renderSavedTrades(trades) {
        const listDiv = document.getElementById('savedTradesList');
        listDiv.innerHTML = ''; 

        if (trades.length === 0) {
            listDiv.innerHTML = '<div class="p-4 text-center text-gray-500">로컬에 저장된 기록이 없습니다.</div>';
            return;
        }

        // loadSavedTrades에서 이미 최신순으로 정렬했으므로, 
        // 여기서 다시 정렬할 필요 없이 바로 사용합니다.
        const tradesToRender = trades.slice(0, MAX_TRADES); 

        // ... (나머지 렌더링 로직 유지) ...
